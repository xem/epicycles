<style>
    body {
        margin: 0
    }
</style>
<canvas id=a width=600 height=600 style="position: absolute"></canvas>
<script>
    d = document;
    c = a.getContext("2d");

    /* GOLF */

    p = [
        [-54, 140],
        [27, 139],
        [61, 71],
        [43, 16],
        [1, 1],
        [47, -19],
        [66, -63],
        [26, -124],
        [-47, -126],
        [-56, 0]
    ];
    T = x = y = u = 0;
    onmousemove = e => (x = e.pageX, y = e.pageY);
    onmousedown = e => u = 1;
	onmouseup = e => (a.width ^= u = 0, f());
	onkeydown = e => (p = [], f())
	G = [];
	(f = _ => {
		Z = []; G = [];
		P = [...p.map(x => [...x])]

		for (i = 0; Math.log2(P.length) != (Math.log2(P.length) | 0); i = (i + 2) % P.length)
			P.splice(i + 1, 0, [(P[i][0] + P[i + 1][0]) / 2, (P[i][1] + P[i + 1][1]) / 2]);

		for (I = 0; I < P.length; I++) {
			for (A = J = 0, K = P.length; K >>= 1; A++)
				J = J << 1 | (I >> A & 1);
			J > I && ([P[I][0], P[J][0], P[I][1], P[J][1]] = [P[J][0], P[I][0], P[J][1], P[I][1]])
		}

		for (H = 1; H * 2 <= P.length; H *= 2)
			for (I = 0; I < P.length; I += H * 2)
				for (J = I; J < I + H; J++)
					E = P[J + H][0] * Math.cos(Math.PI * (J - I) / H) + P[J + H][1] * Math.sin(Math.PI * (J - I) / H),
					M = -P[J + H][0] * Math.sin(Math.PI * (J - I) / H) + P[J + H][1] * Math.cos(Math.PI * (J - I) / H),
					P[J + H][0] = P[J][0] - E,
					P[J + H][1] = P[J][1] - M,
					P[J][0] += E,
					P[J][1] += M;

		for (G = [
				[0, Math.hypot(P[0][0], P[0][1]) / P.length, Math.atan2(P[0][1], P[0][0])]
			], I = 1; I <= P.length / 2; I++)
			G.push(
				[I, Math.hypot(P[I][0], P[I][1]) / P.length, Math.atan2(P[I][1], P[I][0])], [-I, Math.hypot(P[P.length - I][0], P[P.length - I][1]) / P.length, Math.atan2(P[P.length - I][1], P[P.length - I][0])]
			);

		G.pop();
		G.sort((A, B) => B[1] - A[1]);
	})();
	
    setInterval(() => {
        T += .01;
        a.width ^= U = V = 0;
        u && p.push([x - 300, y - 300]);
        for (i of p) c.fillRect(300 + i[0], 300 + i[1], 4, 4);
        for (i of G)
            X = U + i[1] * Math.cos(i[0] * T + i[2]),
            Y = V + i[1] * Math.sin(i[0] * T + i[2]),
            c.beginPath(),
            c.arc(300 + U, 300 + V, i[1], 0, 7),
            c.moveTo(300 + U, 300 + V),
            c.lineTo(300 + X, 300 + Y),
            c.stroke(),
            U = X,
            V = Y;

        Z.push([X, Y]);
        c.strokeStyle = "#33f";
		c.lineWidth = 4;
		c.beginPath();
        for (i of Z) {
            c.lineTo(300 + i[0], 300 + i[1])
        }
		c.stroke()
    }, 16)

    /* END GOLF */
</script>